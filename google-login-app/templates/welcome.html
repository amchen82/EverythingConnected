<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Welcome</title>
    <style>
        body {
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            height: 100vh; margin: 0; font-family: sans-serif;
        }
    </style>
</head>
<body>
<h1>Welcome, {{ email }}!</h1>

<form action="/summarize-emails" method="post">
    <button type="submit">Summarize My Gmail</button>
</form>




{% if summaries %}
    <h2>Email Summaries:</h2>
    <ul>
        {% for summary in summaries %}
            <li>{{ summary | safe }}</li>
        {% endfor %}
    </ul>
{% endif %}


<!-- Calendar Buttons -->
<form action="/read-calendar" method="post">
    <button type="submit">Read My Google Calendar</button>
</form>

<br>
{% if events %}
    <h2>Upcoming Calendar Events (Today + Next 3 Days)</h2>
    <div class="calendar-grid">
        {% for day in grouped_events %}
            <div class="day-column">
                <h3>{{ day.date }}</h3>
                {% if day.events %}
                    <ul>
                        {% for event in day.events %}
                            <li>
                                <strong>{{ event.summary | safe }}</strong><br>
                                <small>{{ event.start }}</small>
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p>No events</p>
                {% endif %}
            </div>
        {% endfor %}
    </div>
{% endif %}
<!-- <form action="/read-all-summaries" method="post">
    <button type="submit">ðŸ”Š Read All Summaries</button>
</form> -->

{% if summary_audios %}
    <h3>Summarized Audio:</h3>
    
    <audio controls autoplay>
        <source src="{{ summary_audios }}" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
   
{% endif %}


<form action="/create-event" method="post">
    <label for="title">Event Title:</label><br>
    <input type="text" id="title" name="title" placeholder="e.g. Team Meeting" required><br><br>

    <label for="start">Start Time:</label><br>
    <input type="datetime-local" id="start" name="start" title="Select start time" required><br><br>

    <label for="end">End Time:</label><br>
    <input type="datetime-local" id="end" name="end" title="Select end time" required><br><br>

    <button type="submit">Create Calendar Event</button>
</form>

{% if event_status %}
    <p><strong>{{ event_status }}</strong></p>
{% endif %}


</form>
</body>
</html>

<style>
.calendar-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
    margin-top: 20px;
}
.day-column {
    background: #f5f5f5;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.day-column h3 {
    border-bottom: 1px solid #ccc;
    padding-bottom: 5px;
}
.day-column ul {
    list-style: none;
    padding-left: 0;
}
.day-column li {
    margin-bottom: 10px;
}
</style>

